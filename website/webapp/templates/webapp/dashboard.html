{% extends 'webapp/base.html' %}

{% block content %}

    <h1>Welcome to the dashboard, {{ user }}</h1>

    <hr>

    <!-- Show 'Create' and 'Upload' buttons only to managers -->
    {% if can_edit %}
        <a class="btn btn-outline-primary btn-sm" href="{% url 'create' %}">Create a new Record &nbsp; <i class="fa fa-plus-circle" aria-hidden="true"></i></a>
        &nbsp;
        <a class="btn btn-outline-primary btn-sm" href="{% url 'upload' %}">Upload your document &nbsp; <i class="fa fa-upload" aria-hidden="true"></i></a>
        &nbsp;
    {% else %}
        <p>You have view-only access to this dashboard.</p>
    {% endif %}

    <hr>

    <table class="table table-light table-hover table-bordered">
        <thead class="table-light">
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Full name</th>
                <th scope="col">Email</th>
                <th scope="col">Phone Number</th>
                <th scope="col">Address</th>
                <th scope="col">City</th>
                <th scope="col">State</th>
                <th scope="col">Country</th>
                <th scope="col">View</th>
            </tr>
        </thead>
        <tbody>
            {% if records %}
                {% for record in records %}
                    <tr>
                        <td>{{ record.id }}</td>
                        <td>{{ record.first_name }} {{ record.last_name }}</td>
                        <td>{{ record.email }}</td>
                        <td>{{ record.phone }}</td>
                        <td>{{ record.address }}</td>
                        <td>{{ record.city }}</td>
                        <td>{{ record.state }}</td>
                        <td>{{ record.country }}</td>
                        <td>
                            {% if can_edit %}
                                <a href="{% url 'record' record.id %}">Click to view</a>
                            {% else %}
                                <span class="disabled-link">View disabled</span>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="9">No records available.</td>
                </tr>
            {% endif %}
        </tbody>
    </table>


{% endblock %}
